## 同源策略

- 概念：同源策略是浏览器的一种安全机制，他要求浏览器网页脚本只能访问与他同源的资源。（同源指的是 **协议**，**域名**，**端口** 都相同）

- 问题：如果浏览器没有同源策略可能会导致 **XSS**，**CSRF** 问题


## 跨域

- 概念：跨域是指网页访问了不同源的资源。

- 解决办法：

  1. JSONP ：利用 script 标签不受同源策略限制的特点实现的。

  2. CORS ：跨域资源共享，这是一种在服务器端和浏览器端共同实现的，在 header 中添加 **Access-Control-Allow-Origin** 添加对应的网页域名。
  
  3. 代理服务器：利用服务器之间不受同源策略限制的特点。（例如使用 node 反向代理）


## XSS ( 跨站脚本攻击 )

- 概念： 是指通过向 HTML 或者 DOM 中注入恶意脚本，通过注入的恶意脚本进行攻击的手段。

- 常见的 XSS 攻击有：**存储型 XSS**，**反射型 XSS**，**DOM based XSS**

- 解决办法：

  1. 过滤输入内容：前后端同时对输入内容进行过滤。（例如 `<script></script>` 中的内容通过正则移除）
  2. 充分利用 CSP 策略：CSP 的核心思想就是让服务器决定浏览器可以价值哪些资源，让服务器决定浏览器可以执行哪些内联脚本。
  3. Cookie 设置 httpOnly ：禁止 JavaScript 脚本访问 Cookie 。

#### 存储型 XSS

- 原理：持久型 XSS 。

  1. 攻击者将恶意 script 脚本保存到数据库。
  2. 随后用户向服务器请求了恶意脚本。
  3. 当用户访问时，恶意脚本将用户的 cookie 等信息上传到攻击者的服务器。
  4. 攻击者拿到用户信息。

- 案例：喜马拉雅曾出现过一个 XSS 漏洞，黑客可以将专辑名设置为 script 脚本，当其他用户访问时就会执行该 script 脚本，该 script 脚本可以将用户的 cookie 等个人信息发送到黑客那里，黑客就可以通过这些信息访问用户的账号。

#### 反射型 XSS

- 原理：非持久型 XSS 。

  1. 攻击者通过各种方式将带有恶意脚本的链接发送给用户。
  2. 用户点击该链接后，访问了带有 XSS 的服务器。
  3. 服务器将含有 XSS 攻击包的脚本返回给用户。
  4. 用户接收到服务器反悔的 XSS 攻击包，浏览器解析后执行，将用户信息上传给攻击者。
  5. 攻击者拿到用户信息。

#### DOM based XSS ( 基于 DOM 的 XSS )

- 原理：不依赖服务器端的存储或者反射，它一般是攻击者通过恶意脚本操作 HTML 的 DOM ，直接在浏览器执行。


## CSRF ( 跨站请求伪造 )

- 概念：攻击者利用用户登录状态进行跨站请求访问第三方网站。


## SQL 注入

- 概念：攻击者将恶意的 SQL 命令注入到数据库中的攻击方式。


## DDOS ( 分布式拒绝服务攻击 )

- 概念：攻击者通过恶意流量访问被攻击服务器，消耗其流量，从而影响正常用户使用。